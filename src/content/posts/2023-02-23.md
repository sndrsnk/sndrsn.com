---
title: Exploring realtime synthesis in Unity with CSound and Steam Audio
description: Here I use Rory Walsh's CSoundUnity plugin to trigger real-time synthesised audio generated in CSound, and Steam Audio to apply spatialisation, occlusion, and reflection.
permalink: /posts/exploring-csound-unity-and-steam-audio/
date: 2023-02-23
---

I recently began working on the sound design for a new game that's being developed, and while my initial intention was to use field recordings through middleware to implement the audio, I wanted to experiment with sounds synthesised in real-time to determine if they're more appropriate for the game's aesthetic. I primarily work within MaxMSP and SuperCollider, though I've been interested in delving further into CSound, particularly for sound design and its expansive repository of available opcodes.

Having discovered Rory Walsh's CSoundUnity plugin[^1] and his informative tutorial[^2] on implementing it, I set out to develop a simple sandbox which would enable me explore CSound in the context of game-audio. I was also interested in learning how these synthesised sounds are processed through Steam Audio's spatialisation, occlusion, and reflection features.

## Setup

I created a new Unity project (version 6000.0.35f1) using the default URP template and imported the Starter Assets[^3] for its pre-built first-person controller and sample scene. I installed Steam Audio's Unity plugin[^4] and set my Unity project to use it for spatialisation and ambisonic decoding[^5]. Refer to the CSoundAudio GitHub page for instructions on how to install it.

## Creating the Sounds

In the interests of keeping this project simple, I designed a simple footstep sound for `footstep.csd`. I've implemented some variance to each sound through randomness applied to both the envelope and `moogfilter` cutoff frequency:

```xml
<Cabbage>
form caption("Footstep") size(400, 300), guiMode("queue") pluginId("def1")
button bounds(10, 42, 80, 40) channel("trigger")
</Cabbage>
<CsoundSynthesizer>
<CsOptions>
-n -d
</CsOptions>
<CsInstruments>
; Initialize the global variables. 
sr = 48000
ksmps = 32
nchnls = 2
0dbfs = 1
seed(0) ; use system timestamp for randomisation

; triggered when button is hit via GUI
instr 1
    kTrig chnget "trigger"
    if changed(kTrig) == 1 then
        event "i", "PlaySound", 0, .3
    endif
endin

instr PlaySound
    icrunch random 5000, 8000
    
    ; 1. foot impact
    apink pinker
    kenv expseg 0.01, 0.01 + 0.03 * rnd(1), 1, 0.05 + 0.03 * rnd(1), 0.01 + 0.02 * rnd(1)
    acrunch = apink * kenv

    ; 2. crunching underfoot
    astones dust 1, 2500 ; random bursts of impulses
    kcfStones expon 3500, p3, 1000
    astones moogladder astones, kcfStones, 0.2
    astones = astones * apink * 1
    
    kcfCrunch expon icrunch, p3, 200
    acrunch moogladder acrunch, kcfCrunch, 0.2

    ; output
    aenv linen 1, 0, p3, 0.1
    asig =  acrunch + astones
    asig = asig * aenv
    out(asig, asig)
endin
</CsInstruments>

<CsScore>
f0 z
i1 0 [60*60*24*7]
</CsScore>
</CsoundSynthesizer>
```

I also made use of `electricity.csd`, one of the examples included in Cabbage for the sphere game object.

The `Assets/Sounds` directory holds my `.csd` files:

![Assets directory](../../assets/img/2025-02-23_assets.png)
*Assets directory*

## Setting up the Game Objects

First, ensure there's an `Audio Listener` component associated with the `Main Camera` object.

### Sphere

Here's the steps I took to set up the 3D sphere that emits a sound via a CSound instrument:

1. Create a simple 3D object such as a sphere and apply a material to it for visibility.

![3D sphere object placed inside structure](../../assets/img/2025-02-23_sphere-object.png)
*3D sphere object placed inside structure*

2. To import CSoundUnity, we add a new `CSoundUnity` component to the object, which automatically attaches an `Audio Source` component.

![Sphere object's inspector panel](../../assets/img/2025-02-23_sphere-inspector.png)
*Sphere object's inspector panel*

3. Drag and drop `electricity.csd` into the `Csd Asset` field in the inspector.

4. In order to emit sounds from the game object, a new script component needs to be created (as per Rory Walsh's tutorial):

```c#
blah
```

### PlayerCapsule

1. Drag the `PlayerCapsule` into the scene.

![Unity hierarchy](../../assets/img/2025-02-23_hierarchy.png)
*Unity hierarchy*

2. Similar to the 3D sphere object, a `CSoundUnity` component is attached to the `PlayerCapsule` game object to trigger the footstep sounds. Drag `footstep.csd` to the `Csd Asset` field.

3. The `PlayerCapsule` object contains a ready-to-use player input controller `FirstPersonController`, in which the logic to trigger footstep sounds at a given interval is implemented:

```c#
FRAGMENTE
```

## Using Steam Audio to Configure the Environment

[^1]: **Walsh, Rory.** "[CSoundUnity.](https://github.com/rorywalsh/CsoundUnity)".

[^2]: **Walsh, Rory.** "[Cabbage / CsoundUnity ](https://www.youtube.com/watch?v=C9vFZTRVfSg)".

[^3]: **Unity Technologies.** "[Starter Assets - FirstPerson | Updates in new CharacterController package](https://assetstore.unity.com/packages/essentials/starter-assets-firstperson-updates-in-new-charactercontroller-pa-196525)".

[^4]: **Valve Corporation.** "[Steam Audio Unity Plugin](https://valvesoftware.github.io/steam-audio/downloads.html)".

[^5]: **Valve Corporation.** "[Steam Audio Documentation](https://valvesoftware.github.io/steam-audio/unity_quickstart.html)". 